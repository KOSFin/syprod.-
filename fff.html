<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customizable Dashboard Page</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Roboto+Slab:wght@400;500;700&family=Source+Code+Pro:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        /* General styles and variables */
        :root {
            --bg-color: #f8fafc;
            --sidebar-bg-color: #ffffff;
            --card-bg-color: #ffffff;
            --text-color: #0f172a;
            --text-color-light: #64748b;
            --border-color: #e2e8f0;
            --primary-color: #4f46e5;
            --primary-color-text: #ffffff;
            --border-radius: 0.5rem; /* 8px */
            --font-family: 'Inter', sans-serif;
            --row-height: 50px;
        }

        /* Dark theme styles */
        .dark {
            --bg-color: #0f172a;
            --sidebar-bg-color: #1e293b;
            --card-bg-color: #1e293b;
            --text-color: #f8fafc;
            --text-color-light: #94a3b8;
            --border-color: #334155;
        }

        body {
            font-family: var(--font-family);
            background-color: var(--bg-color);
            color: var(--text-color);
        }
        
        .view { display: none; }
        .view.active { display: block; }

        .main-card {
            background-color: var(--card-bg-color);
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
        }
        .custom-btn {
            background-color: var(--primary-color);
            color: var(--primary-color-text);
            border-radius: var(--border-radius);
        }
        .custom-btn:hover { opacity: 0.9; }
        .form-input, .form-select { border-radius: var(--border-radius) !important; }
        .form-input:focus, .form-select:focus {
            --tw-ring-color: var(--primary-color);
            border-color: var(--primary-color);
        }

        /* Sidebar Accordion */
        .nav-section summary {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.625rem 1rem;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .nav-section summary:hover, .nav-link:hover {
            background-color: rgba(127, 127, 127, 0.1);
        }
        .nav-section summary svg { transition: transform 0.2s; }
        .nav-section[open] > summary svg:last-child { transform: rotate(90deg); }
        .nav-section-links { padding-left: 2.75rem; padding-top: 0.25rem; padding-bottom: 0.5rem; }

        /* --- CALENDAR STYLES --- */
        .calendar-wrapper {
            position: relative;
            display: grid;
            grid-template-columns: 60px 1fr;
        }
        .time-column { padding-top: 48px; }
        .time-label {
            height: var(--row-height);
            text-align: right;
            padding-right: 16px;
            font-size: 12px;
            color: var(--text-color-light);
            position: relative;
            transform: translateY(-8px);
        }
        .days-header-grid { display: grid; grid-template-columns: repeat(5, 1fr); }
        .day-header {
            text-align: center;
            font-weight: 500;
            font-size: 14px;
            padding: 12px 4px;
            border-bottom: 1px solid var(--border-color);
            height: 48px;
            color: var(--text-color-light);
        }
        .days-content-grid { display: grid; grid-template-columns: repeat(5, 1fr); position: relative; }
        .day-column {
            position: relative;
            border-right: 1px solid var(--border-color);
            background-image: linear-gradient(var(--border-color) 1px, transparent 1px);
            background-size: 100% var(--row-height);
        }
        .day-column:last-child { border-right: none; }
        .event {
            position: absolute;
            left: 8px;
            right: 8px;
            border-radius: 4px;
            padding: 2px 8px;
            font-size: 13px;
            font-weight: 500;
            line-height: 1.4;
            overflow: hidden;
            z-index: 10;
            transition: all 0.2s ease;
        }
        .event:hover {
            transform: scale(1.02);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
            z-index: 11;
        }

        /* Custom Scrollbar */
        .custom-scroll::-webkit-scrollbar { width: 14px; }
        .custom-scroll::-webkit-scrollbar-track { background: transparent; }
        .custom-scroll::-webkit-scrollbar-thumb {
            background-color: #d1d5db;
            border-radius: 20px;
            border: 4px solid var(--card-bg-color);
        }
        .dark .custom-scroll::-webkit-scrollbar-thumb {
            background-color: #4b5563;
            border-color: var(--card-bg-color);
        }
    </style>
</head>
<body>

    <div id="config-view" class="view active">
        <div class="min-h-screen flex items-center justify-center p-4 bg-gray-100">
            <div class="w-full max-w-4xl bg-white rounded-xl shadow-lg p-8">
                <h1 class="text-2xl font-bold text-gray-800 mb-2">Dashboard Page Generator</h1>
                <p class="text-gray-500 mb-8">Customize the appearance and content for your personal page.</p>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-x-6 gap-y-4">
                    
                    <div class="md:col-span-1 space-y-4">
                        <h2 class="text-lg font-semibold text-gray-700 border-b pb-2">User Data</h2>
                        <div><label for="firstName" class="block text-sm font-medium text-gray-700">First Name</label><input type="text" id="firstName" value="Ethan" class="form-input mt-1 block w-full"></div>
                        <div><label for="lastName" class="block text-sm font-medium text-gray-700">Last Name</label><input type="text" id="lastName" value="Cooper" class="form-input mt-1 block w-full"></div>
                        <div><label for="universityName" class="block text-sm font-medium text-gray-700">Institution Name</label><input type="text" id="universityName" value="Vellore Institute of Technology" class="form-input mt-1 block w-full"></div>
                    </div>

                    <div class="md:col-span-1 space-y-4">
                        <h2 class="text-lg font-semibold text-gray-700 border-b pb-2">Design Settings</h2>
                         <div><label for="menuPosition" class="block text-sm font-medium text-gray-700">Menu Position</label><select id="menuPosition" class="form-select mt-1 block w-full"><option value="left">Left</option><option value="right">Right</option></select></div>
                        <div><label for="theme" class="block text-sm font-medium text-gray-700">Theme</label><select id="theme" class="form-select mt-1 block w-full"><option value="light">Light</option><option value="dark">Dark</option></select></div>
                        <div><label for="fontFamily" class="block text-sm font-medium text-gray-700">Font</label><select id="fontFamily" class="form-select mt-1 block w-full"><option value="'Inter', sans-serif">Inter (Sans-Serif)</option><option value="'Roboto Slab', serif">Roboto Slab (Serif)</option><option value="'Source Code Pro', monospace">Source Code (Monospace)</option></select></div>
                        <div><label for="borderRadius" class="block text-sm font-medium text-gray-700">Border Radius</label><select id="borderRadius" class="form-select mt-1 block w-full"><option value="0.25rem">Small</option><option value="0.5rem" selected>Medium</option><option value="1rem">Large</option></select></div>
                    </div>

                    <div class="md:col-span-1 space-y-4">
                        <h2 class="text-lg font-semibold text-gray-700 border-b pb-2">Colors & Widgets</h2>
                        <div class="grid grid-cols-2 gap-4">
                            <div><label for="primaryColor" class="block text-sm font-medium text-gray-700">Accent</label><input type="color" id="primaryColor" value="#4f46e5" class="mt-1 block w-full h-10 p-1 border border-gray-300"></div>
                             <div><label for="sidebarColor" class="block text-sm font-medium text-gray-700">Sidebar</label><input type="color" id="sidebarColor" value="#ffffff" class="mt-1 block w-full h-10 p-1 border border-gray-300"></div>
                            <div><label for="cardColor" class="block text-sm font-medium text-gray-700">Cards</label><input type="color" id="cardColor" value="#ffffff" class="mt-1 block w-full h-10 p-1 border border-gray-300"></div>
                        </div>
                        <h3 class="text-md font-semibold text-gray-700 pt-2">Visible Widgets</h3>
                        <div class="space-y-2">
                             <label class="flex items-center gap-2"><input type="checkbox" id="showCalendar" class="h-4 w-4 rounded" checked><span>Calendar</span></label>
                             <label class="flex items-center gap-2"><input type="checkbox" id="showMail" class="h-4 w-4 rounded" checked><span>Mail</span></label>
                             <label class="flex items-center gap-2"><input type="checkbox" id="showNotifications" class="h-4 w-4 rounded" checked><span>Notifications</span></label>
                        </div>
                    </div>

                </div>
                <div class="mt-8 text-right"><button id="generateBtn" class="bg-indigo-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors">Generate Page</button></div>
            </div>
        </div>
    </div>

    <div id="dashboard-view" class="view">
        </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {

        // --- DOM Elements ---
        const configView = document.getElementById('config-view');
        const dashboardView = document.getElementById('dashboard-view');
        const generateBtn = document.getElementById('generateBtn');
        const inputs = {
            firstName: document.getElementById('firstName'),
            lastName: document.getElementById('lastName'),
            universityName: document.getElementById('universityName'),
            theme: document.getElementById('theme'),
            primaryColor: document.getElementById('primaryColor'),
            sidebarColor: document.getElementById('sidebarColor'),
            cardColor: document.getElementById('cardColor'),
            fontFamily: document.getElementById('fontFamily'),
            borderRadius: document.getElementById('borderRadius'),
            menuPosition: document.getElementById('menuPosition'),
            showCalendar: document.getElementById('showCalendar'),
            showMail: document.getElementById('showMail'),
            showNotifications: document.getElementById('showNotifications'),
        };

        // --- Data ---
        const navIcons = {
            launch: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6"><path d="M11.25 4.533A9.707 9.707 0 006 3a9.735 9.735 0 00-3.25.555.75.75 0 00-.5.707v14.5a.75.75 0 00.5.707c1.71.374 3.522.573 5.25.573 1.728 0 3.54-.2 5.25-.573a.75.75 0 00.5-.707V4.24a.75.75 0 00-.5-.707A9.707 9.707 0 0012.75 3c-.832 0-1.642.084-2.427.244a.75.75 0 01-.823-.51z" /><path d="M12.75 3a9.735 9.735 0 013.25.555.75.75 0 01.5.707v14.5a.75.75 0 01-.5.707c-1.71.374-3.522.573-5.25.573-1.728 0-3.54-.2-5.25-.573a.75.75 0 01-.5-.707V4.24a.75.75 0 01.5-.707A9.735 9.735 0 016 3c1.906 0 3.743.274 5.427.779a.75.75 0 01.823.511z" /></svg>`,
            academicsLearning: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6"><path d="M10.5 18.75a.75.75 0 000 1.5h3a.75.75 0 000-1.5h-3z" /><path fill-rule="evenodd" d="M8.625.75A3.375 3.375 0 005.25 4.125v15.75a3.375 3.375 0 003.375 3.375h6.75a3.375 3.375 0 003.375-3.375V4.125A3.375 3.375 0 0015.375.75h-6.75zM7.5 4.125C7.5 3.504 8.004 3 8.625 3h6.75c.621 0 1.125.504 1.125 1.125v15.75c0 .621-.504 1.125-1.125 1.125h-6.75A1.125 1.125 0 017.5 19.875V4.125z" clip-rule="evenodd" /></svg>`,
            paying: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6"><path d="M4.5 3.75a3 3 0 00-3 3v10.5a3 3 0 003 3h15a3 3 0 003-3V6.75a3 3 0 00-3-3h-15z" /><path fill-rule="evenodd" d="M22.5 6.75a1.5 1.5 0 00-1.5-1.5H3a1.5 1.5 0 00-1.5 1.5v10.5a1.5 1.5 0 001.5 1.5h18a1.5 1.5 0 001.5-1.5V6.75zM12 15a.75.75 0 01-.75-.75v-1.5a.75.75 0 011.5 0v1.5a.75.75 0 01-.75.75zm2.25-3a.75.75 0 000-1.5h-4.5a.75.75 0 000 1.5h4.5z" clip-rule="evenodd" /></svg>`,
            studentInfo: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6"><path fill-rule="evenodd" d="M7.5 6a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM3.751 20.105a8.25 8.25 0 0116.498 0 .75.75 0 01-.437.695A18.683 18.683 0 0112 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 01-.437-.695z" clip-rule="evenodd" /></svg>`,
            arrow: `<svg class="ml-auto text-gray-500" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z" clip-rule="evenodd" /></svg>`
        };
        const navData = [
            { section: "Quick Launch", icon: navIcons.launch, links: ["Homepage", "Notifications", "My Profile"] },
            { section: "Academics & Learning", icon: navIcons.academicsLearning, links: ["LMS Portal", "Course Catalog", "Advising"], open: true },
            { section: "Paying for College", icon: navIcons.paying, links: ["Account Summary", "Make a Payment", "Financial Aid"] },
            { section: "Student Information", icon: navIcons.studentInfo, links: ["Personal Information", "Emergency Contacts"] }
        ];

        // --- PAGE GENERATION LOGIC ---

        function getSettings() {
            const settings = {};
            for (const key in inputs) {
                 settings[key] = inputs[key].type === 'checkbox' ? inputs[key].checked : inputs[key].value;
            }
            return settings;
        }

        function applySettings() {
            const settings = getSettings();
            const root = document.documentElement;

            // Apply CSS variables for theme
            root.style.setProperty('--sidebar-bg-color', settings.sidebarColor);
            root.style.setProperty('--card-bg-color', settings.cardColor);
            root.style.setProperty('--primary-color', settings.primaryColor);
            root.style.setProperty('--font-family', settings.fontFamily);
            root.style.setProperty('--border-radius', settings.borderRadius);
            
            if (settings.theme === 'dark') {
                root.classList.add('dark');
                // Set default dark theme colors if user picks conflicting light colors
                root.style.setProperty('--bg-color', '#0f172a');
                root.style.setProperty('--text-color', '#f8fafc');
                root.style.setProperty('--text-color-light', '#94a3b8');
                root.style.setProperty('--border-color', '#334155');
            } else {
                root.classList.remove('dark');
                 // Set default light theme colors
                root.style.setProperty('--bg-color', '#f8fafc');
                root.style.setProperty('--text-color', '#0f172a');
                root.style.setProperty('--text-color-light', '#64748b');
                root.style.setProperty('--border-color', '#e2e8f0');
            }

            createDashboardLayout(settings);
            
            configView.classList.remove('active');
            dashboardView.classList.add('active');
        }

        function createDashboardLayout(settings) {
            // Sidebar Navigation
            let sidebarNavHtml = navData.map(item => `
                <details class="nav-section" ${item.open ? 'open' : ''}>
                    <summary class="font-medium text-sm" style="color: var(--text-color);">
                        ${item.icon}<span>${item.section}</span>${navIcons.arrow}
                    </summary>
                    <div class="nav-section-links">
                        <ul class="space-y-1">
                            ${item.links.map(link => `<li><a href="#" class="block text-sm py-1 nav-link" style="color: var(--text-color-light);">${link}</a></li>`).join('')}
                        </ul>
                    </div>
                </details>`).join('');

            // Widgets
            const unreadMail = Math.floor(Math.random() * 20);
            const newNotifications = Math.floor(Math.random() * 10);
            
            let widgetsHtml = '<div class="grid grid-cols-1 lg:grid-cols-3 gap-6">';
            
            if (settings.showCalendar) {
                widgetsHtml += `
                <div class="lg:col-span-2 main-card shadow-sm">
                    <div class="px-6 py-4 border-b flex flex-wrap items-center justify-between gap-4" style="border-color: var(--border-color);">
                        <h3 class="text-lg font-semibold">Calendar</h3>
                        <div class="flex items-center gap-4">
                            <h4 class="text-base font-medium">Jul 28 â€“ Aug 1, 2025</h4>
                            <button id="open-settings-btn" class="px-3 py-1 bg-gray-200 text-gray-800" style="border-radius: var(--border-radius);">Week</button>
                        </div>
                    </div>
                    <div class="p-1">
                        <div id="calendar-container-wrapper" class="custom-scroll h-[600px] overflow-y-scroll"></div>
                    </div>
                </div>`;
            } else {
                 widgetsHtml += '<div class="lg:col-span-2"></div>'; // Placeholder to maintain grid structure
            }

            widgetsHtml += '<div class="space-y-6">'; // Wrapper for right-side widgets

            if (settings.showMail) {
                 widgetsHtml += `
                 <div class="main-card shadow-sm">
                    <div class="p-4 border-b flex justify-between items-center" style="border-color: var(--border-color);">
                         <h3 class="font-semibold">Mail</h3>
                         ${unreadMail > 0 ? `<span class="text-sm font-bold text-white px-2.5 py-0.5 rounded-full" style="background-color: var(--primary-color);">${unreadMail}</span>` : ''}
                    </div>
                    <div class="p-4 space-y-3 text-sm">
                        <p><strong>From:</strong> Prof. Alistair Finch</p>
                        <p class="truncate" style="color: var(--text-color-light);">Regarding your thesis proposal...</p>
                        <hr style="border-color: var(--border-color);"/>
                        <p><strong>From:</strong> Library Services</p>
                        <p class="truncate" style="color: var(--text-color-light);">Book "Cosmos" is now available</p>
                    </div>
                 </div>`;
            }

            if (settings.showNotifications) {
                widgetsHtml += `
                 <div class="main-card shadow-sm">
                    <div class="p-4 border-b flex justify-between items-center" style="border-color: var(--border-color);">
                         <h3 class="font-semibold">Notifications</h3>
                          ${newNotifications > 0 ? `<span class="text-sm font-bold text-white px-2.5 py-0.5 rounded-full" style="background-color: var(--primary-color);">${newNotifications}</span>` : ''}
                    </div>
                    <div class="p-4 space-y-3 text-sm">
                        <p>Grade posted for <strong>PHYS-101</strong></p>
                        <hr style="border-color: var(--border-color);"/>
                        <p>Registration for Fall 2025 opens tomorrow.</p>
                         <hr style="border-color: var(--border-color);"/>
                        <p style="color: var(--text-color-light);">Your tuition payment is due next week.</p>
                    </div>
                 </div>`;
            }
            
            widgetsHtml += '</div></div>'; // Close right-side wrapper and main grid

            // Final Layout Assembly
            const sidebarOrderClass = settings.menuPosition === 'right' ? 'order-last' : '';
            const sidebarBorderClass = settings.menuPosition === 'right' ? 'border-l' : 'border-r';

            dashboardView.innerHTML = `
            <div class="flex h-screen">
                <aside class="flex flex-col w-64 flex-shrink-0 ${sidebarOrderClass} ${sidebarBorderClass}" style="background-color: var(--sidebar-bg-color); border-color: var(--border-color);">
                    <div class="flex items-center justify-between p-4 h-16 border-b" style="border-color: var(--border-color);">
                        <h2 class="font-semibold text-base">${settings.firstName} ${settings.lastName}</h2>
                    </div>
                    <div class="flex-grow p-2 space-y-2 custom-scroll overflow-y-auto">${sidebarNavHtml}</div>
                </aside>

                <main class="flex-grow p-6 md:p-8 custom-scroll overflow-y-auto">
                    <header class="mb-6">
                        <h1 class="text-4xl font-bold">${navData.find(i => i.open).section}</h1>
                        <p class="text-xl" style="color: var(--text-color-light);">${settings.universityName}</p>
                    </header>
                    ${widgetsHtml}
                </main>
            </div>`;

            // Add event listener to open settings
            const openSettingsBtn = document.getElementById('open-settings-btn');
            if(openSettingsBtn) {
                openSettingsBtn.addEventListener('click', () => {
                    dashboardView.classList.remove('active');
                    configView.classList.add('active');
                });
            }
            
            if(settings.showCalendar) {
                renderRandomCalendar();
            }
        }

        function renderRandomCalendar() {
            const container = document.getElementById('calendar-container-wrapper');
            if (!container) return;

            const hours = Array.from({ length: 10 }, (_, i) => i + 8); // 8am to 5pm
            const days = [
                { name: 'Mon', date: '28/7' }, { name: 'Tue', date: '29/7' },
                { name: 'Wed', date: '30/7' }, { name: 'Thu', date: '31/7' },
                { name: 'Fri', date: '1/8' },
            ];
            const subjects = [
                 { title: 'Lecture: ACG-2021', color: '#FEF9C3', textColor: '#713F12'},
                 { title: 'Lab: PHY-101', color: '#DBEAFE', textColor: '#1E40AF'},
                 { title: 'Seminar: ACG-2071', color: '#D1FAE5', textColor: '#064E3B'},
                 { title: 'Office Hours: AMH-2020', color: '#FEE2E2', textColor: '#991B1B'},
                 { title: 'Studio: ART-330', color: '#F3E8FF', textColor: '#581C87'},
                 { title: 'Calculus II', color: '#E0F2FE', textColor: '#0C4A6E'},
                 { title: 'Data Structures', color: '#FCE7F3', textColor: '#831843'}
            ];

            let placedEvents = Array.from({ length: 5 }, () => []); // Array for each day
            const eventCount = Math.floor(Math.random() * 8) + 7; // 7 to 14 events

            for (let i = 0; i < eventCount; i++) {
                let attempts = 0;
                while (attempts < 10) {
                    const dayIndex = Math.floor(Math.random() * 5);
                    const subject = subjects[Math.floor(Math.random() * subjects.length)];
                    const duration = (Math.floor(Math.random() * 3) + 2) / 2; // 1, 1.5, 2 hours
                    const startHour = 8 + Math.random() * (10 - duration); // Random start between 8am and (6pm - duration)
                    const endHour = startHour + duration;

                    // Collision check
                    const collision = placedEvents[dayIndex].some(e => startHour < e.endHour && endHour > e.startHour);

                    if (!collision) {
                        placedEvents[dayIndex].push({ startHour, endHour, duration, subject });
                        break;
                    }
                    attempts++;
                }
            }

            // HTML Generation
            let timeColumnHtml = hours.map(h => `<div class="time-label">${h > 12 ? h-12 : h}${h>=12 ? 'pm' : 'am'}</div>`).join('');
            let dayHeadersHtml = days.map(d => `<div class="day-header"><span>${d.name}</span> <span class="text-gray-400">${d.date}</span></div>`).join('');

            let dayColumnsHtml = days.map((day, dayIndex) => {
                const eventsHtml = placedEvents[dayIndex].map(event => {
                    const top = (event.startHour - 8) * 50;
                    const height = event.duration * 50 - 4;
                    return `<div class="event" style="top: ${top}px; height: ${height}px; background-color: ${event.subject.color}; color: ${event.subject.textColor};">
                        ${event.subject.title}
                    </div>`;
                }).join('');
                return `<div class="day-column">${eventsHtml}</div>`;
            }).join('');
            
            container.innerHTML = `
                <div class="calendar-wrapper">
                    <div class="time-column">${timeColumnHtml}</div>
                    <div class="flex flex-col flex-grow">
                        <div class="days-header-grid">${dayHeadersHtml}</div>
                        <div class="days-content-grid h-full">${dayColumnsHtml}</div>
                    </div>
                </div>
            `;
        }

        // --- INITIALIZATION ---
        generateBtn.addEventListener('click', applySettings);

    });
    </script>
</body>
</html>